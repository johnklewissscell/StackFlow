<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StackFlow - Stock Simulator</title>
    <link rel="stylesheet" href="application.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/vendor/chartjs-chart-financial.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@2.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <!-- TradingView embeddable chart (used as an alternative reliable candlestick provider) -->
    <script
      type="text/javascript"
      src="https://s3.tradingview.com/tv.js"
    ></script>
  </head>
  <body>
    <!-- Auto-refresh toggle (floating control) -->
    <div id="auto-refresh-control" title="Toggle automatic price refresh every 15s" style="position:fixed;bottom:14px;right:14px;background:rgba(0,0,0,0.65);color:#fff;padding:8px 10px;border-radius:8px;z-index:1200;font-family:inherit;font-size:13px;">
      <label style="cursor:pointer;display:flex;align-items:center;gap:8px;">
        <input id="auto-refresh-checkbox" type="checkbox" style="width:16px;height:16px;" />
        <span id="auto-refresh-label">Auto Refresh</span>
      </label>
    </div>

    <script type="module" src="application.js"></script>
        <header class="navbar">
        <div class="logo" style="color: #fff;"><img style="width: auto; height: 60px;" src="Logo.png"></div>
        <nav>
            <ul class="nav-links">
                <li><a href="index.html#" id="home-link">Home</a></li>
                <li><a href="index.html#features" id="features-link">Features</a></li>
                <li><a href="index.html#about" id="about-link">About</a></li>
                <li><a href="index.html#contacts" id="contact-link">Contact</a></li>
            </ul>
        </nav>
        <div class="auth-buttons">
            <button onclick="window.location.href = 'login.html'" class="log" id="login-btn" class="mover">Log In</button>
            <button onclick="window.location.href = 'signup.html'" class="log" id="signup-btn">Sign Up</button>
        </div>
    </header>
    <div id="toprow">
      <div id="container">
        <div id="controls">
          <input
            type="text"
            id="symbol"
            placeholder="Enter stock symbol (AAPL)"
          /><br />
          <button id="getStock">Get Price</button>
          <button id="toggleCandle" style="margin-left: 8px">
            Try Candlestick
          </button>

          <div id="stock-info"></div>

          <div id="time-range">
            <button data-range="1D">1D</button>
            <button data-range="1M">1M</button>
            <button data-range="1Y">1Y</button>
            <button data-range="5Y">5Y</button>
          </div>
        </div>
      </div>
      <!-- StackAI Chat -->
      <div
        id="chat-panel"
        style="
          border: 1px solid #ccc;
          padding: 12px;
          width: 420px;
          margin-top: 16px;
        "
      >
        <h3>StackAI Chat</h3>
        <div
          id="chat-messages"
          style="
            height: 200px;
            overflow: auto;
            border: 1px solid #eee;
            padding: 8px;
            background: #fafafa;
          "
        ></div>
        <div style="margin-top: 8px; display: flex; gap: 8px">
          <input
            id="chat-input"
            type="text"
            placeholder="Ask the AI..."
            style="flex: 1; padding: 6px"
          />
          <button id="chat-send">Send</button>
        </div>
        <div
          id="chat-status"
          style="font-size: 12px; color: #666; margin-top: 6px"
        ></div>
      </div>
      <div id="chart-container" style="display: none; height: 400px">
        <canvas id="stockChart"></canvas>
      </div>
    </div>

    <!-- === Portfolio Section === -->
    <div id="portfolio-section" style="margin-top: 40px">
      <h2
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
        "
      >
        Portfolios
        <button
          id="add-portfolio"
          style="
            background: #0078ff;
            color: #fff;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
          "
        >
          + New Portfolio
        </button>
      </h2>
      <div id="portfolios"></div>
    </div>

    <script type="module" src="application.js"></script>
  </body>
</html>
