<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StackFlow App</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="publicstyles/style.css">
  <link rel="stylesheet" href="publicstyles/application.css">
  <link rel="stylesheet" href="publicstyles/login.css">
  <link rel="stylesheet" href="publicstyles/signup.css">

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <!-- Chart.js Core -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Chart.js Financial plugin -->
  <script src="publicscripts/chartjs-chart-financial.min.js"></script>

  <!-- Your app scripts -->
  <script src="publicscripts/application.js" defer></script>
  <script src="publicscripts/index.js" defer></script>
  <script src="publicscripts/login.js" defer></script>
  <script src="publicscripts/signup.js" defer></script>
  <script src="publicscripts/stockapi.js" defer></script>
</head>

<body>

  <!-- Auto refresh toggle -->
  <div id="auto-refresh-control"
       title="Toggle automatic price refresh every 15s"
       style="position:fixed;bottom:14px;right:14px;background:rgba(0,0,0,0.65);color:#fff;padding:8px 10px;border-radius:8px;z-index:1200;font-family:inherit;font-size:13px;">
    <label style="cursor:pointer;display:flex;align-items:center;gap:8px;">
      <input id="auto-refresh-checkbox" type="checkbox" style="width:16px;height:16px;" />
      <span id="auto-refresh-label">Auto Refresh</span>
    </label>
  </div>

  <!-- Welcome banner (shown only after login) -->
  <div id="welcome-banner" style="display:none;margin-top:30px;margin-bottom:20px;">
    <div style="background:linear-gradient(135deg,#203a43 0%,#2c5364 100%);border-radius:12px;padding:25px;box-shadow:0 4px 18px rgba(0,0,0,0.15);max-width:1200px;margin:0 auto;">
      <h2 style="margin:0 0 8px;color:#00b4d8;font-size:28px;">
        Welcome back, <span id="welcome-username"></span>! ðŸ‘‹
      </h2>
      <p style="margin:0;color:#bac0c2;font-size:15px;">
        Ready to manage your portfolio? Check out your stocks and chat with StackAI.
      </p>
    </div>
  </div>

  <!-- Navigation Bar -->
  <header class="navbar">
    <div class="logo" style="color:#fff;">
      <img src="/favicon.ico" style="width:auto;height:60px;">
    </div>

    <nav>
      <ul class="nav-links">
        <li><a href="index.html#">Home</a></li>
        <li><a href="index.html#features">Features</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#contacts">Contact</a></li>
      </ul>
    </nav>

    <div class="auth-buttons" id="auth-section">
      <button id="login-btn" class="log">Log In</button>
      <button id="signup-btn" class="log">Sign Up</button>
    </div>

    <div id="user-menu" style="display:none;align-items:center;gap:15px;">
      <span id="user-greeting" style="color:#fff;font-weight:500;"></span>
      <button id="signout-btn" class="log" style="background:#ff6b6b;padding:0.6rem 1.2rem;">
        Sign Out
      </button>
    </div>
  </header>

  <!-- Main Layout -->
  <div id="toprow">

    <!-- Stock Controls -->
    <div id="container">
      <div id="controls" style="width: 450px; height: 375px;">
  <input
    type="text"
    id="symbol"
    placeholder="Enter stock symbol (AAPL)"
  /><br />
  
  <div id="controls-btns">
    <button id="getStock" class="specialbutton" type="button">Get Price</button>
    <button id="toggleCandle" class="specialbutton" type="button" style="margin-left: 8px;">
      Try Candlestick
    </button>
  </div>

  <div id="stock-info"></div>

  <div id="time-range">
    <button class="specialbutton" data-range="1D" type="button">1D</button>
    <button class="specialbutton" data-range="1M" type="button">1M</button>
    <button class="specialbutton" data-range="1Y" type="button">1Y</button>
    <button class="specialbutton" data-range="5Y" type="button">5Y</button>
  </div>
</div>

    </div>

    <!-- Chat Panel -->
    <div id="chat-panel" style="border:1px solid #ccc;padding:12px;width:450px;height:400px;">
      <h3>StackAI Chat</h3>

      <div id="chat-messages"
           style="height:200px;overflow:auto;border:1px solid #eee;padding:8px;background:#fafafa;">
      </div>

      <div style="margin-top:8px;display:flex;gap:8px;">
        <input id="chat-input" type="text" placeholder="Ask the AI..." style="flex:1;padding:6px;" />
        <button id="chat-send" class="specialbutton">Send</button>
      </div>

      <div id="chat-status" style="font-size:12px;color:#666;margin-top:6px;"></div>
    </div>

    <!-- Chart -->
    <div id="chart-container" style="display:none;height:400px;">
      <canvas id="stockChart"></canvas>
    </div>
  </div>

  <!-- Portfolio Section -->
  <div id="portfolio-section" style="margin-top:40px;">
    <h2 style="display:flex;justify-content:space-between;align-items:center;">
      Portfolios
      <button id="add-portfolio"
              style="background:#203a43;color:#fff;border:none;padding:6px 12px;border-radius:6px;">
        + New Portfolio
      </button>
    </h2>

    <div id="portfolios"></div>
  </div>

</body>
</html>
